stack: spring
role: service

deploy:
  enabled: true
  branch: main

  # build / artifact
  from_artifact: false        # true = ambil dari Nexus, false = build di server
  build_tool: maven
  java_version: 21

  # runtime (releases + symlink current.jar)
  path: /mnt/data/apps/spring/user-company-web-v1
  port: 8086

  # fallback lama (systemd) â€” tetap boleh ada, tapi tak dipakai jika compose_dir diset
  method: jar
  service_name: spring-user-company-web-v1.service

  # >>> penting untuk Docker:
  compose_dir: /mnt/data/docker/springboot/user-company-web-v1
  compose_file: docker-compose.yml

artifact:
  publish: nexus
  base_url: https://nexus.dwiaribowokj.xyz
  repository: maven-snapshots    # atau maven-releases
  groupId: com.company.user
  artifactId: web-v1
  version: latest
  packaging: jar
  # classifier: ""
